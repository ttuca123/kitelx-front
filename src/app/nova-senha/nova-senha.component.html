<div layout="column" layout-fill style="background: url(assets/images/background/6.jpg); margin-left: auto; margin-right: auto; opacity: 0.8;">  

    <div layout-fill>
    
      <div align="center" layout="row" layout-align="center center">
    
    
    <div  layout-fill [ngStyle]="{'color': 'white'}">
      
      <div align="center" layout="row" layout-align="center center">
        <mat-card
          class="info-card mat-elevation-z8"
          flex="80"
          style="max-width: 800px;;"
        >        
          <div style="margin-top: 1rem;"> 
         &nbsp;
        </div>
          <img src="{{usuario.fotoUrl}}" (error)="setDefaultPic()" width="100" height="100" class="imgPrincipal"  style="margin-top: 10px;" />                                
    
    
          <mat-card-title> Nova Senha </mat-card-title>               
          <mat-card-content fxLayout="column" fxLayoutAlign="center">       
            <h5 >Email: {{usuario.email}}</h5>
            <mat-hint *ngIf="submitted">
                <div class="alert alert-success" role="alert">
                  {{msgSucesso}}
        
                </div>
            </mat-hint>
            <mat-hint *ngIf="error">
                <div class="alert alert-danger" role="alert">
                  {{msgErro}}
        
                </div>
            </mat-hint>
              
            <form
              fxLayout="column"
              fxLayoutAlign="start stretch"
              #usuarioForm="ngForm"
              (ngSubmit)="onSubmit()"
              id="frm_cadastro_form"
            >
            <div fxFlex="100" fxLayoutAlign="start">
              <h4>Trocar Senha:</h4>                
            </div>


            <div fxFlex="100" fxLayout="row" fxLayoutAlign="space-between  start" >         
              
                <mat-form-field fxFlex="90" >    
                      
                    <input
                      id="ipt_senha2"
                      name="senha2"
                      autocomplete="off"                    
                      matInput
                      [type]="'text'"
                      class="form-control"
                      value=""
                      
                      placeholder="Token Gerado"
                      [(ngModel)]="usuario.senhaHash" 
                      #senha2 = "ngModel"                      
                      required 
                      disabled                                       
                      >                                         
                  </mat-form-field> 

            </div>
            
                  <div fxFlex="100" fxLayout="row" fxLayoutAlign="space-between  start" >
    
                    <mat-form-field fxFlex="45">    
                      
                      <input
                        id="ipt_senha"
                        name="senha"
                        autocomplete="off"                    
                        matInput
                        [type]="hide ? 'password' : 'text'"
                        class="form-control"
                        value=""
                        placeholder="Senha"
                        [(ngModel)]="usuario.senha" 
                        #senha = "ngModel"
                        minlength="3"
                        required                    
                        >                   
                        <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                    </mat-form-field>  
    
    
                    <mat-form-field fxFlex="45">
    
                      
                      <input
                        id="ipt_contrasenha"
                        name="contrasenha"
                        autocomplete="off"                        
                        matInput
                        [type]="hide ? 'password' : 'text'"
                        class="form-control"
                        value=""
                        placeholder="Confirma Senha"
                        [(ngModel)]="usuario.contraSenha" 
                        #contraSenha = "ngModel"
                        minlength="3"
                        required                    
                      >                   
                      <button type="button" mat-icon-button matSuffix (click)="hide = !hide"  [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                      </button>
                    </mat-form-field>     
    
                  </div>

                  <mat-dialog-actions>                    
                    <button
                      id="btn_salvar"
                      class=" m-r-20 hidden-sm-up"
                      mat-flat-button color="primary"                      
                      type="submit"
                      [disabled]="!usuarioForm.valid || usuario.senha!=usuario.contraSenha"
                      
                    >
                  SALVAR
              </button>          
            </mat-dialog-actions>
            </form>
          </mat-card-content>
          
        </mat-card>
      </div>
      </div>
    </div>
  </div>
</div>